(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages-bbs/post-detail/post-detail"],{143:function(t,e,n){"use strict";(function(t,e){var o=n(4);n(26);o(n(25));var r=o(n(144));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n(1)["default"],n(2)["createPage"])},144:function(t,e,n){"use strict";n.r(e);var o=n(145),r=n(147);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n(149);var s,u=n(32),a=Object(u["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],s);a.options.__file="pages-bbs/post-detail/post-detail.vue",e["default"]=a.exports},145:function(t,e,n){"use strict";n.r(e);var o=n(146);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},146:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return r})),n.d(e,"staticRenderFns",(function(){return s})),n.d(e,"recyclableRender",(function(){return i})),n.d(e,"components",(function(){return o}));try{o={postList:function(){return n.e("components/post-list/post-list").then(n.bind(null,429))},commentPopup:function(){return n.e("components/comment-popup/comment-popup").then(n.bind(null,442))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.comments,(function(e,n){var o=t.__get_orig(e),r=t._f("formatTime")(e.created_time),i=e.post_comments&&e.post_comments.length>0,s=i?t.__map(e.post_comments,(function(e,n){var o=t.__get_orig(e),r=t._f("formatTime")(e.created_time);return{$orig:o,f1:r}})):null;return{$orig:o,f0:r,g0:i,l0:s}})));t.$mp.data=Object.assign({},{$root:{l1:n}})},i=!1,s=[];r._withStripped=!0},147:function(t,e,n){"use strict";n.r(e);var o=n(148),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},148:function(t,e,n){"use strict";(function(t){var o=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(18)),i=o(n(65)),s={filters:{formatTime:function(t){return i.default.getHumanTime(t)}},data:function(){return{detail:{id:0,content:[],user_id:0,comment_count:0,support_count:0,is_top:0,created_time:"2021-03-02 00:00:00",user:{id:0,avatar:"",sex:"未知",name:""},issupport:!1},page:1,comments:[],loadStatus:"more",commentForm:{reply_id:0,reply_user:null}}},onLoad:function(e){var n=this;if(!e.id)return this.$toast("非法参数"),t.navigateBack({delta:1});this.detail.id=e.id,this.$api.readPost({id:e.id}).then((function(t){n.detail=t})),this.getCommentList()},methods:{sendComment:function(e){var n=this,o={post_id:this.detail.id,content:e,reply_id:0};this.commentForm.reply_user&&(o.reply_id=this.commentForm.reply_id,o.reply_user=this.commentForm.reply_user),this.$api.replyPost(o).then((function(e){n.$toast("评论成功"),n.page=1,n.getCommentList(),t.$emit("refreshBbs")}))},openComment:function(t){t?(this.commentForm.reply_id=t.reply_id,this.commentForm.reply_user=t.reply_user,this.commentForm.reply_user.username=t.reply_user.name):this.commentForm={reply_id:0,reply_user:null},this.$refs.comment.open()},handleSupport:function(){var e=this,n=this.detail,o=n.issupport?"unSupportPost":"supportPost",r=n.issupport?"取消点赞":"点赞成功";this.$api[o]({post_id:n.id}).then((function(o){n.support_count=n.issupport?n.support_count-1:n.support_count+1,n.issupport=!n.issupport,e.$toast(r),t.$emit("refreshBbs")}))},loadMore:function(){"more"==this.loadStatus&&(this.page=this.page+1,this.getCommentList())},getCommentList:function(){var t=this;this.loadStatus="loading",this.$api.getPostComments({post_id:this.detail.id,page:this.page}).then((function(e){var n=e.rows;t.comments=1==t.page?n:[].concat((0,r.default)(t.comments),(0,r.default)(n)),t.loadStatus=n.length<10?"noMore":"more"})).catch((function(e){t.loadStatus="more",t.page>1&&(t.page=t.page-1)}))}}};e.default=s}).call(this,n(2)["default"])},149:function(t,e,n){"use strict";n.r(e);var o=n(150),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},150:function(t,e,n){}},[[143,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages-bbs/post-detail/post-detail.js.map