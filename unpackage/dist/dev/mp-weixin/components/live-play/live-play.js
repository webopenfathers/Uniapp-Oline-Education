(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/live-play/live-play"],{390:function(t,e,n){"use strict";n.r(e);var o=n(391),i=n(393);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var a,c=n(32),u=Object(c["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],a);u.options.__file="components/live-play/live-play.vue",e["default"]=u.exports},391:function(t,e,n){"use strict";n.r(e);var o=n(392);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},392:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return i})),n.d(e,"staticRenderFns",(function(){return a})),n.d(e,"recyclableRender",(function(){return r})),n.d(e,"components",(function(){return o}));try{o={commentPopup:function(){return n.e("components/comment-popup/comment-popup").then(n.bind(null,442))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,e=t.$createElement;t._self._c},r=!1,a=[];i._withStripped=!0},393:function(t,e,n){"use strict";n.r(e);var o=n(394),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},394:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"live-play",props:{detail:Object},data:function(){return{scrollH:500,videoContext:null,danmuList:[],scrollInto:"",currentTime:0,appDanmuList:[],showAppVideo:!1}},created:function(){var e=t.getSystemInfoSync();this.scrollH=e.windowHeight-t.upx2px(420)-50,this.getData()},beforeDestroy:function(){},methods:{getData:function(){this.$api.getLiveComment({page:1,limit:500,live_id:this.detail.id}).then((function(t){}))},initAppVideo:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.appDanmuList=n.map((function(t){return{text:"".concat(t.name,":").concat(t.content),color:t.color,time:parseInt(t.time/1e3)}})),this.showAppVideo=!0,this.$nextTick((function(){e.videoContext=t.createVideoContext("video",e)}))},initH5Video:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e=e.map((function(t){return{duration:5e3,id:t.id,start:t.time,txt:"".concat(t.name,":").concat(t.content),style:{color:t.color,borderRadius:"50px",padding:"5px 5px",backgroundColor:"rgba(255, 255, 255, 0.1)"}}})),this.videoContext=new FlvPlayer({id:"video",url:this.detail.playUrl,isLive:!0,playsinline:!0,height:t.upx2px(420),width:window.innerWidth,danmu:{panel:!0,comments:e,area:{start:0,end:1},closeDefaultBtn:!1,defaultOff:!1}}),this.videoContext.on("timeupdate",this.handleTimeUpdate)},handleTimeUpdate:function(t){this.currentTime=t.currentTime},openComment:function(){this.$refs.comment.open()},sendComment:function(e){var n=this;if(""==e)return this.$toast("弹幕内容不能为空");t.showLoading({title:"发送中...",mask:!1}),this.$api.sendLiveComment({live_id:this.detail.id,content:e,time:parseInt(1e3*this.currentTime),color:this.getRandomColor()}).then((function(t){n.danmuList.push(t),setTimeout((function(){n.scrollInto="live_"+t.id}),300)})).finally((function(){t.hideLoading()}))},getRandomColor:function(){for(var t=[],e=0;e<3;++e){var n=Math.floor(256*Math.random()).toString(16);n=1==n.length?"0"+n:n,t.push(n)}return"#"+t.join("")}}};e.default=n}).call(this,n(2)["default"])}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/live-play/live-play.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/live-play/live-play-create-component',
    {
        'components/live-play/live-play-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('2')['createComponent'](__webpack_require__(390))
        })
    },
    [['components/live-play/live-play-create-component']]
]);
