(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages-test/test-detail/test-detail"],{101:function(t,e,n){"use strict";(function(t,e){var i=n(4);n(26);i(n(25));var o=i(n(102));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n(1)["default"],n(2)["createPage"])},102:function(t,e,n){"use strict";n.r(e);var i=n(103),o=n(105);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);var s,u=n(32),a=Object(u["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],s);a.options.__file="pages-test/test-detail/test-detail.vue",e["default"]=a.exports},103:function(t,e,n){"use strict";n.r(e);var i=n(104);n.d(e,"render",(function(){return i["render"]})),n.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(e,"components",(function(){return i["components"]}))},104:function(t,e,n){"use strict";var i;n.r(e),n.d(e,"render",(function(){return o})),n.d(e,"staticRenderFns",(function(){return s})),n.d(e,"recyclableRender",(function(){return r})),n.d(e,"components",(function(){return i}));try{i={timerBox:function(){return n.e("components/timer-box/timer-box").then(n.bind(null,363))},uniCard:function(){return n.e("components/uni-card/uni-card").then(n.bind(null,351))},mpHtml:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/mp-html/components/mp-html/mp-html")]).then(n.bind(null,370))},mainButton:function(){return n.e("components/main-button/main-button").then(n.bind(null,358))},testOption:function(){return n.e("components/test-option/test-option").then(n.bind(null,378))},testActions:function(){return n.e("components/test-actions/test-actions").then(n.bind(null,383))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var t=this,e=t.$createElement,n=(t._self._c,t._f("formatType")(t.q.type)),i="answer"!==t.q.type&&"completion"!==t.q.type&&"trueOrfalse"!==t.q.type&&"radio"!==t.q.type&&"checkbox"===t.q.type?t.__map(t.q.options,(function(e,n){var i=t.__get_orig(e),o=t._f("formatChecked")(n,t.q.user_value);return{$orig:i,f1:o}})):null;t.$mp.data=Object.assign({},{$root:{f0:n,l0:i}})},r=!1,s=[];o._withStripped=!0},105:function(t,e,n){"use strict";n.r(e);var i=n(106),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=o.a},106:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={answer:"问答题",completion:"填空题",trueOrfalse:"判断题",checkbox:"多选题",radio:"单选题"},i={filters:{formatType:function(t){return n[t]},formatChecked:function(t,e){return e.includes(t)}},data:function(){return{current:0,total:0,list:[],id:0,expire:0,title:"",user_test_id:"",isback:!1}},computed:{q:function(){return this.list[this.current-1]||{}},undo:function(){var t=[];return this.list.forEach((function(e,n){(("answer"===e.type||"completion"===e.type)&&!e.user_value[0]||("trueOrfalse"===e.type||"radio"===e.type)&&-1==e.user_value||"checkbox"===e.type&&0===e.user_value.length)&&t.push(n+1)})),t}},onLoad:function(e){if(!e.id)return this.$toast("非法参数"),void setTimeout((function(){t.navigateBack({delta:1})}),600);this.id=e.id,this.getData()},onBackPress:function(){var e=this;return this.isback?(t.$emit("refreshTestList",""),!1):(t.showModal({content:"是否要放弃这场考试？",cancelText:"继续做题",confirmText:"放弃",success:function(n){n.confirm&&(e.isback=!0,t.navigateBack({delta:1}))}}),!0)},methods:{beforeSubmit:function(){var e=this;if(this.undo.length>0)return t.showModal({content:"还有题目没有完成：第".concat(this.undo.join(","),"题"),showCancel:!1});t.showModal({content:"是否要交卷",cancelText:"继续做题",confirmText:"现在交卷",success:function(t){t.confirm&&e.submit()}})},submit:function(){var e=this;t.showLoading({title:"交卷中...",mask:!1}),this.$api.submitTest({user_test_id:this.user_test_id,value:this.list.map((function(t){return t.user_value}))}).then((function(n){e.$toast("交卷成功"),e.isback=!0,setTimeout((function(){t.navigateBack({delta:1})}),500)})).finally((function(){t.hideLoading()}))},getData:function(){var e=this;t.showLoading({title:"加载中..."}),this.$api.readTestPaper({id:this.id}).then((function(t){e.expire=t.expire,e.title=t.title,e.list=t.testpaper_questions,e.user_test_id=t.user_test_id,e.total=e.list.length,e.total>0&&(e.current=1)})).finally((function(){t.hideLoading()}))},end:function(){this.isback=!0,this.$toast("考试结束"),setTimeout((function(){t.navigateBack({delta:1})}),600)},onPage:function(t){this.current=t},addCompletion:function(){this.list[this.current-1].user_value.push("")},handleDo:function(t){if("radio"!==this.q.type&&"trueOrfalse"!==this.q.type){var e=this.q.user_value.findIndex((function(e){return e==t}));-1===e?this.q.user_value.push(t):this.q.user_value.splice(e,1)}else this.list[this.current-1].user_value=t}}};e.default=i}).call(this,n(2)["default"])}},[[101,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages-test/test-detail/test-detail.js.map