(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages-order/create-order/create-order"],{235:function(n,e,t){"use strict";(function(n,e){var o=t(4);t(26);o(t(25));var i=o(t(236));n.__webpack_require_UNI_MP_PLUGIN__=t,e(i.default)}).call(this,t(1)["default"],t(2)["createPage"])},236:function(n,e,t){"use strict";t.r(e);var o=t(237),i=t(239);for(var u in i)["default"].indexOf(u)<0&&function(n){t.d(e,n,(function(){return i[n]}))}(u);var c,r=t(32),s=Object(r["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],c);s.options.__file="pages-order/create-order/create-order.vue",e["default"]=s.exports},237:function(n,e,t){"use strict";t.r(e);var o=t(238);t.d(e,"render",(function(){return o["render"]})),t.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(e,"components",(function(){return o["components"]}))},238:function(n,e,t){"use strict";var o;t.r(e),t.d(e,"render",(function(){return i})),t.d(e,"staticRenderFns",(function(){return c})),t.d(e,"recyclableRender",(function(){return u})),t.d(e,"components",(function(){return o}));try{o={bookList:function(){return t.e("components/book-list/book-list").then(t.bind(null,447))},courseList:function(){return t.e("components/course-list/course-list").then(t.bind(null,275))},uniList:function(){return t.e("uni_modules/uni-list/components/uni-list/uni-list").then(t.bind(null,317))},uniListItem:function(){return t.e("uni_modules/uni-list/components/uni-list-item/uni-list-item").then(t.bind(null,324))},mainButton:function(){return t.e("components/main-button/main-button").then(t.bind(null,358))}}}catch(r){if(-1===r.message.indexOf("Cannot find module")||-1===r.message.indexOf(".vue"))throw r;console.error(r.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var n=this,e=n.$createElement;n._self._c},u=!1,c=[];i._withStripped=!0},239:function(n,e,t){"use strict";t.r(e);var o=t(240),i=t.n(o);for(var u in o)["default"].indexOf(u)<0&&function(n){t.d(e,n,(function(){return o[n]}))}(u);e["default"]=i.a},240:function(n,e,t){"use strict";(function(n){var o=t(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(t(65)),u={data:function(){return{detail:{cover:"",id:0,price:"",title:"",type:""},id:0,type:null,coupon_count:0,user_coupon_id:0,coupon_price:0}},onLoad:function(e){var t=this;if(!e.id||!e.type)return this.$toast("非法参数"),void n.navigateBack({delta:1});this.id=e.id,this.type=e.type,this.$api.readGoods({id:this.id,type:this.type}).then((function(n){t.detail=n,t.getUserableCouponCount()})).catch((function(e){n.navigateBack({delta:1})})),n.$on("chooseCoupon",this.handleChooseCoupon)},beforeDestroy:function(){n.$off("chooseCoupon",this.handleChooseCoupon)},computed:{price:function(){var n=((1e3*this.detail.price-1e3*this.coupon_price)/1e3).toFixed(2);return n<=0?0:n},coupon_desc:function(){return this.coupon_price?"减".concat(this.coupon_price,"元"):this.coupon_count?"请选择优惠券(".concat(this.coupon_count,"张)"):"暂无可用"}},methods:{submit:function(){n.showLoading({title:"创建订单中...",mask:!1});var e={goods_id:this.detail.id,type:this.type,user_coupon_id:this.user_coupon_id},t="save";"flashsale"==this.type&&(e={flashsale_id:this.id},t="flashsale"),this.$api.createOrder(e,t).then((function(e){i.default.wxpay(e.no,(function(){n.navigateBack({delta:1})}))})).finally((function(){n.hideLoading()}))},handleChooseCoupon:function(n){this.user_coupon_id=n.user_coupon_id,this.coupon_price=n.price},chooseCoupon:function(){0!=this.coupon_count&&this.authJump("/pages-user/my-coupon/my-coupon?goods_id=".concat(this.id,"&type=").concat(this.type))},getUserableCouponCount:function(){var e=this;n.showLoading({title:"加载中...",mask:!1}),this.$api.getUserableCouponCount({goods_id:this.id,type:"course"==this.type?"course":"column"}).then((function(n){e.coupon_count=n})).finally((function(){n.hideLoading()}))}}};e.default=u}).call(this,t(2)["default"])}},[[235,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages-order/create-order/create-order.js.map